(this["webpackJsonpcrystal-life"]=this["webpackJsonpcrystal-life"]||[]).push([[0],{65:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var c=n(3),a=n.n(c),i=n(49),r=n(23),s=a.a.createContext({}),l=n(5),o=n(12),u=n(19);u.a.initializeApp({apiKey:"AIzaSyA7Et9JNWlPyV2WTa-tH00Z6_ex2AwJJNA",authDomain:"crystal-showroom.firebaseapp.com",databaseURL:"https://crystal-showroom-default-rtdb.firebaseio.com/",projectId:"crystal-showroom",storageBucket:"crystal-showroom.appspot.com",messagingSenderId:"249831469600",appId:"1:249831469600:web:ccf76daa2e4e4779780245",measurementId:"G-PHLW3HRD0Z"});var d=u.a.database(),j=u.a.storage().ref();function b(){return{setSession:function(e,t){var n=JSON.stringify(t);sessionStorage.setItem(e,n)},getSession:function(e){var t;return sessionStorage.getItem(e)?JSON.parse(null!==(t=sessionStorage.getItem(e))&&void 0!==t?t:""):null}}}var h=function(){return Object(c.useContext)(s)},f=function e(t){var n,c;Object(o.a)(this,e),this.adminToken=void 0,this.isUser=void 0,this.adminToken=null!==(n=null===t||void 0===t?void 0:t.adminToken)&&void 0!==n?n:null,this.isUser=null!==(c=null===t||void 0===t?void 0:t.isUser)&&void 0!==c&&c},v=n(0);function x(e){var t=e.children,n=function(){var e,t=b(),n=t.getSession,a=t.setSession,i=null!==(e=n("accessRight"))&&void 0!==e?e:new f({adminToken:null,isUser:!1}),r=i.adminToken,s=i.isUser,o=Object(c.useRef)(r),j=Object(c.useState)(!!r),h=Object(l.a)(j,2),v=h[0],x=h[1],O=Object(c.useState)(s),m=Object(l.a)(O,2),p=m[0],g=m[1];return Object(c.useEffect)((function(){var e=u.a.auth().onAuthStateChanged((function(e){o.current||x(!1),Promise.resolve(e).then((function(e){return e||x(!1),null===e||void 0===e?void 0:e.getIdToken()})).then((function(e){x(e===o.current),e!==o.current&&a("accessRight",new f({adminToken:null,isUser:!1}))}))}));return function(){return e()}}),[]),{isAdmin:v,isUser:p,adminLogin:function(e,t){return new Promise((function(n,c){u.a.auth().setPersistence(u.a.auth.Auth.Persistence.LOCAL).then((function(){u.a.auth().signInWithEmailAndPassword(e,t).then((function(e){var t;return x(!0),g(!1),console.log(e.user),null===(t=e.user)||void 0===t?void 0:t.getIdToken()})).then((function(e){e&&(o.current=e),e&&a("accessRight",new f({adminToken:e,isUser:!1})),n(e)})).catch((function(e){return c(e)}))}))}))},userLogin:function(e){return new Promise((function(t,n){d.ref("allowList").child(e).get().then((function(e){x(!1),g(!0),a("accessRight",new f({adminToken:null,isUser:!0})),t(e)})).catch((function(e){n(e)}))}))},adminLogout:function(){return new Promise((function(e,t){u.a.auth().signOut().then((function(){x(!1),g(!1),a("accessRight",new f({adminToken:null,isUser:!1})),e("log out")})).catch((function(e){console.warn(e),t("log out fail")}))}))},userLogout:function(){return new Promise((function(e,t){x(!1),g(!1),a("accessRight",new f({adminToken:null,isUser:!1})),e("log out")}))}}}();return Object(v.jsx)(s.Provider,{value:n,children:t})}n(65);var O,m,p=n(7),g=n(15),y="user",N=n(9),C=n(35),w=n(34),S=n(75),k=function e(t,n){Object(o.a)(this,e),this.id=void 0,this.key=void 0,this.text=void 0,this.value=void 0,this.url=void 0,this.isSelected=void 0,this.key=Object(S.a)(),this.text=null!==t&&void 0!==t?t:"",this.url=null!==n&&void 0!==n?n:"",this.isSelected=!1},L=function(e){Object(C.a)(n,e);var t=Object(w.a)(n);function n(e,c,a){var i;return Object(o.a)(this,n),(i=t.call(this)).radiusWidth=void 0,i.crystalCount=void 0,i.beadSize=void 0,i.text=e,i.value=c,i.radiusWidth=180,i.crystalCount=a,i.beadSize=360/a*3+3,i}return n}(k),E=function(e){Object(C.a)(n,e);var t=Object(w.a)(n);function n(e,c,a){var i;return Object(o.a)(this,n),(i=t.call(this)).crystalCount=void 0,i.text=e,i.value=c,i.crystalCount=a,i}return n}(k),R=n(51),A=function(e){Object(C.a)(n,e);var t=Object(w.a)(n);function n(e,c){var a;return Object(o.a)(this,n),(a=t.call(this,e)).key=void 0,a.text=void 0,a.value=void 0,a.url=void 0,a.isSelected=void 0,a.leftFlower=void 0,a.rightFlower=void 0,a.charm=void 0,a.key=null!==e&&void 0!==e?e:"",a.url=null!==c&&void 0!==c?c:"",a}return n}(k),P=function(){function e(){Object(o.a)(this,e),this.id=void 0,this.handSize=void 0,this.sliverPipe=void 0,this.beads=[],this.createdAt=void 0}return Object(R.a)(e,[{key:"setHandSize",value:function(e){this.handSize=e}},{key:"setSliverPipe",value:function(e){this.sliverPipe=e}},{key:"setBeads",value:function(e){this.beads=e}},{key:"setCreatedTime",value:function(e){this.createdAt=e}},{key:"createBeads",value:function(e){this.beads=this.generateBeads(e)}},{key:"generateBeads",value:function(e){return new Array(e).fill(-1).map((function(){return new A(Object(S.a)())}))}}]),e}(),F=function e(t){var n,c,a;Object(o.a)(this,e),this.id=void 0,this.name=void 0,this.url=void 0,this.createdAt=void 0,this.name=null!==(n=null===t||void 0===t?void 0:t.name)&&void 0!==n?n:"",this.url=null!==(c=null===t||void 0===t?void 0:t.url)&&void 0!==c?c:"",this.createdAt=null!==(a=null===t||void 0===t?void 0:t.createdAt)&&void 0!==a?a:void 0},D="INIT_CRYSTAL_SHOWROOM",T="SELECT_BEAD",I="SELECT_CRYSTAL_BEAD",z="REMOVE_SELECTED_CRYSTAL_BEAD",U="ADD_FLOWER_COVER_ON_LEFT",_="ADD_FLOWER_COVER_ON_RIGHT",M="REMOVE_FLOWER",B="ADD_CHARM",H="REMOVE_CHARM",V="SELECT_SLIVER_PIPE",W="SELECT_HAND_SIZE",q={crystalRing:new P,selectedDisplayCrystal:[],isFillCrystal:!1,dispatch:function(){return null}},J=a.a.createContext(q),K=function(e,t){switch(t.type){case D:var n=new P;return n.setHandSize(t.data.handSize),n.createBeads(t.data.handSize.crystalCount),Object.assign({},e,{crystalRing:n,selectedDisplayCrystal:[]});case B:var c=e.selectedDisplayCrystal,a=e.crystalRing,i=a.beads.map((function(e){return c.includes(e.key)?Object(N.a)(Object(N.a)({},e),{charm:t.data.charm}):e}));return a.setBeads(i),Object.assign({},e,{crystalRing:a,selectedDisplayCrystal:[]});case H:var r=e.selectedDisplayCrystal,s=e.crystalRing,l=s.beads.map((function(e){return r.includes(e.key)?Object(N.a)(Object(N.a)({},e),{charm:new F}):e}));return s.setBeads(l),Object.assign({},e,{crystalRing:s,selectedDisplayCrystal:[]});case U:var o=e.selectedDisplayCrystal,u=e.crystalRing,d=u.beads.map((function(e){return o.includes(e.key)?Object(N.a)(Object(N.a)({},e),{leftFlower:t.data.flower}):e}));return u.setBeads(d),Object.assign({},e,{crystalRing:u,selectedDisplayCrystal:[]});case _:var j=e.selectedDisplayCrystal,b=e.crystalRing,h=b.beads.map((function(e){return j.includes(e.key)?Object(N.a)(Object(N.a)({},e),{rightFlower:t.data.flower}):e}));return b.setBeads(h),Object.assign({},e,{crystalRing:b,selectedDisplayCrystal:[]});case M:var f=e.selectedDisplayCrystal,v=e.crystalRing,x=v.beads.map((function(e){return f.includes(e.key)?Object(N.a)(Object(N.a)({},e),{rightFlower:new F,leftFlower:new F}):e}));return v.setBeads(x),Object.assign({},e,{crystalRing:v,selectedDisplayCrystal:[]});case W:var O=t.data.handSize,m=e.crystalRing;return m.setHandSize(O),m.createBeads(O.crystalCount),m.setSliverPipe(new k),Object.assign({},e,{crystalRing:m});case T:var p=t.data.bead.url,g=e.crystalRing,y=e.crystalRing.beads.map((function(t){return e.selectedDisplayCrystal.includes(t.key)?Object(N.a)(Object(N.a)({},t),{url:p}):t})),C=y.every((function(e){return!!e.url}));return g.setBeads(y),Object.assign({},e,{crystalRing:g,selectedDisplayCrystal:[],isFillCrystal:C});case I:var w=e.selectedDisplayCrystal.concat(t.data.selectedDisplayCrystal);return Object.assign({},e,{selectedDisplayCrystal:w});case z:var S=e.selectedDisplayCrystal.filter((function(e){return e!==t.data.selectedDisplayCrystal}));return Object.assign({},e,{selectedDisplayCrystal:S});case V:var L=t.data.sliverPipe,E=e.crystalRing,R=E.handSize.crystalCount-L.crystalCount;return E.createBeads(R),E.setSliverPipe(L),Object.assign({},e,{crystalRing:E,selectedDisplayCrystal:[]});default:return e}},Y=function(e){return function(t){e({type:T,data:{bead:t}})}},Z=function(e,t){return function(n){e({type:W,data:{handSize:n,sliverPipe:t}})}},G=function(e){return function(t){e({type:V,data:{sliverPipe:t}})}},X=function(e,t){return function(n){t({type:e,data:{flower:n}})}},$=function(e){return function(){e({type:M})}},Q=function(e){return function(t){e({type:B,data:{charm:t}})}},ee=function(e){return function(){e({type:H})}};!function(e){e[e.HandSize=0]="HandSize",e[e.SliverPipe=1]="SliverPipe",e[e.Crystal=2]="Crystal",e[e.FlowerCover=3]="FlowerCover",e[e.Charm=4]="Charm"}(O||(O={})),function(e){e.UserLogin="/userLogin",e.EmployeeLogin="/employeeLogin",e.CrystalShowroom="/crystalShowroom",e.CrystalDashboard="/crystalDashboard",e.AllowList="/allowList",e.CrystalProductList="/crystalProductList",e.HandSizeForm="/handSizes",e.SliverPipeForm="/sliverPipes",e.CrystalBeadForm="/crystalBeads",e.FlowerCoverForm="/flowerCover",e.CompletePage="/completePage",e.CharmForm="/charm"}(m||(m={}));var te,ne,ce=n(8),ae=Object(ce.c)(te||(te=Object(p.a)(["\n0%,\n80%,\n100% {\n  transform: scale(0);\n}\n\n40% {\n  transform: scale(1);\n}\n"]))),ie=ce.b.div(ne||(ne=Object(p.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  transform: ",";\n\n  .bounce1 {\n    animation-delay: -0.64s;\n  }\n\n  .bounce2 {\n    animation-delay: -0.48s;\n  }\n\n  .bounce3 {\n    animation-delay: -0.32s;\n  }\n\n  .bounce4 {\n    animation-delay: -0.16s;\n  }\n\n  div {\n    display: inline-block;\n    width: 18px;\n    height: 18px;\n    background-color: #277fd3;\n    border-radius: 100%;\n    margin: 0 5px;\n    animation: "," 1.4s infinite ease-in-out both;\n  }\n"])),(function(e){var t;return"scale(".concat(null!==(t=null===e||void 0===e?void 0:e.scale)&&void 0!==t?t:1,")")}),ae);function re(e){var t=e.scale;return Object(v.jsxs)(ie,{scale:t,children:[Object(v.jsx)("div",{className:"bounce1"}),Object(v.jsx)("div",{className:"bounce2"}),Object(v.jsx)("div",{className:"bounce3"}),Object(v.jsx)("div",{className:"bounce4"}),Object(v.jsx)("div",{className:"bounce5"})]})}var se,le,oe,ue,de,je,be=n(44),he=n.n(be),fe=n(55);function ve(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,a=Object(c.useState)(!1),i=Object(l.a)(a,2),r=i[0],s=i[1],o=Object(c.useRef)(d.ref(e)),u=Object(c.useState)([]),j=Object(l.a)(u,2),b=j[0],h=j[1],f=Object(c.useRef)([]),v=function(e,t){var c;s(!0);var a=f.current,i=e?o.current.child(e):o.current,r=(null===(c=a[a.length-1])||void 0===c?void 0:c.createdAt)||0,l=t?i.orderByChild("createdAt").startAfter(r).limitToFirst(t):i;return new Promise((function(e){l.once("value",(function(c){if(c.exists()){var i=[];Object.entries(c.val()).forEach((function(e){var t=Object(N.a)({id:e[0]},e[1]);i=i.concat(t)})),f.current=t?a.concat(i):i,(null===n||void 0===n?void 0:n.by)===se.Desc?h(f.current.reverse()):h(f.current),s(!1),e(!1)}else!t&&h([]),s(!1),e(!0);l.off()}))}))},x=function(e,t){var n,c=null!==(n=null!==t&&void 0!==t?t:o.current.push().key)&&void 0!==n?n:Object(S.a)(),a=JSON.parse(JSON.stringify(e));return new Promise((function(e){return o.current.child(c).set(a,e)}))},O=function(e){return new Promise((function(t){return o.current.child(e).remove(t)}))},m=function(e,t){return new Promise((function(n){return o.current.child(e).update(t,n)}))};return Object(c.useEffect)((function(){s(!0);var e=n?o.current.orderByChild(n.path):o.current;return t&&e.on("value",(function(e){var t=[];e.forEach((function(e){var n=Object(N.a)({id:e.key},e.val());t=t.concat(n)})),s(!1),(null===n||void 0===n?void 0:n.by)===se.Desc?h(t.reverse()):h(t)})),function(){return e.off("value")}}),[]),{list:b,isLoading:r,getList:v,post:x,remove:O,patch:m}}function xe(e,t,n,a){var i=ve(e,!1,void 0),r=i.list,s=i.isLoading,o=i.getList,u=Object(c.useState)(!1),d=Object(l.a)(u,2),j=d[0],b=d[1],h=Object(c.useRef)(!1),f=Object(c.useRef)(!1),v=function(){var e=Object(fe.a)(he.a.mark((function e(){return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j||o("",3).then((function(e){b(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){b(!1)}),[e]),Object(c.useEffect)((function(){var e,c;return t&&n&&a&&(e=function(e){var t=new IntersectionObserver((function(e){h.current=e[0].isIntersecting,f.current||h.current&&(f.current=!0,v())}),{root:n});return t.observe(e),t}(t),c=function(e){var t=new MutationObserver((function(e){var t,n="LI"==(null===(t=e[e.length-1].addedNodes[0])||void 0===t?void 0:t.nodeName);f.current=!1,h.current&&n&&(f.current=!0,v())}));return t.observe(e,{childList:!0,subtree:!1}),t}(a)),function(){e&&e.disconnect(),c&&c.disconnect()}}),[e,t,n]),{list:r,isLoading:s}}!function(e){e.Asc="asc",e.Desc="desc"}(se||(se={}));var Oe,me,pe,ge,ye,Ne=ce.b.ul(le||(le=Object(p.a)(["\n  ","\n\n  li {\n    cursor: pointer;\n  }\n"])),(function(e){return"grid"===e.layout&&Object(ce.a)(oe||(oe=Object(p.a)(["\n      display: grid;\n      grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));\n      grid-template-rows: 60px;\n      gap: 14px;\n      width: 100%;\n      height: 100%;\n      position: relative;\n    "])))})),Ce=ce.b.li(ue||(ue=Object(p.a)(["\n  cursor: pointer;\n  padding: 4px;\n  position: relative;\n  ","\n"])),(function(e){return e.isSelected&&Object(ce.a)(de||(de=Object(p.a)(["\n      border: 1px solid gray;\n      border-radius: 20px;\n    "])))})),we=ce.b.div(je||(je=Object(p.a)(["\n  position: relative;\n\n  .sensor {\n    position: absolute;\n    width: 100%;\n    height: 30px;\n    bottom: 0;\n    pointer-events: none;\n  }\n"])));function Se(e){var t=e.layout,n=e.tableName,a=e.openSelect,i=e.openRemove,r=e.updateSelect,s=e.removeSelect,o=Object(c.useState)(),u=Object(l.a)(o,2),d=u[0],j=u[1],b=Object(c.useState)(null),h=Object(l.a)(b,2),f=h[0],x=h[1],O=Object(c.useState)(null),m=Object(l.a)(O,2),p=m[0],g=m[1],y=Object(c.useState)(null),N=Object(l.a)(y,2),C=N[0],w=N[1],S=xe(n,f,p,C),k=S.list,L=S.isLoading;Object(c.useEffect)((function(){k.length&&a&&E(k[0])}),[k]);var E=function(e){j(e),r&&r(e)};return Object(v.jsxs)("div",{className:"h-full overflow-y-auto overflow-x-hidden",ref:g,children:[Object(v.jsxs)(we,{children:[Object(v.jsx)(Ne,{layout:t,ref:w,children:k.map((function(e){return Object(v.jsxs)(Ce,{onClick:function(){return E(e)},isSelected:!!a&&e.id===(null===d||void 0===d?void 0:d.id),children:[Object(v.jsx)("img",{className:"transform hover:scale-110",src:e.url}),i&&Object(v.jsx)("i",{className:"icon-xs transform hover:scale-125 icon-x-mark absolute top-1 right-1",onClick:function(){return function(e){s&&s(e)}(e)}})]},e.id)}))}),Object(v.jsx)("div",{className:"sensor",ref:x})]}),Object(v.jsx)("div",{className:"mt-2",children:L&&Object(v.jsx)(re,{scale:.5})})]})}function ke(e){var t=e.addCharm,n=e.removeCharm,a=Object(c.useState)(new F),i=Object(l.a)(a,2),r=i[0],s=i[1];return Object(v.jsxs)("div",{className:"h-full flex flex-col",children:[Object(v.jsxs)("div",{className:"flex flex-row justify-around",children:[Object(v.jsx)("button",{onClick:function(){return t(r)},className:"text-blue-500",children:"\u52a0\u540a\u98fe"}),Object(v.jsx)("button",{onClick:function(){return n()},className:"text-blue-500",children:"\u79fb\u9664\u540a\u98fe"})]}),Object(v.jsx)("div",{className:"mt-6 flex-1 h-full overflow-auto",children:Object(v.jsx)(Se,{layout:"grid",tableName:"codeList/charms",openSelect:!0,updateSelect:function(e){return s(e)}})})]})}function Le(e){var t=e.updateLeft,n=e.updateRight,a=e.removeFlower,i=Object(c.useState)(new F),r=Object(l.a)(i,2),s=r[0],o=r[1];return Object(v.jsxs)("div",{className:"h-full flex flex-col",children:[Object(v.jsxs)("div",{className:"flex flex-row justify-around",children:[Object(v.jsx)("button",{onClick:function(){return t(s)},className:"text-blue-500",children:"+ \u52a0\u5728\u5de6\u908a"}),Object(v.jsx)("button",{onClick:function(){return a()},className:"text-blue-500",children:"- \u79fb\u9664"}),Object(v.jsx)("button",{onClick:function(){return n(s)},className:"text-blue-500",children:"+ \u52a0\u5728\u53f3\u908a"})]}),Object(v.jsx)("div",{className:"flex-1",children:Object(v.jsx)(Se,{layout:"grid",tableName:"codeList/flowerCovers",openSelect:!0,updateSelect:function(e){return o(e)}})})]})}function Ee(e){var t=e.groupName,n=e.list,c=e.defaultValue,a=e.updateRadio,i=function(e){var n=e.item;return Object(v.jsxs)("label",{htmlFor:n.key,className:"shadow border border-gray-300 h-12 flex items-center p-4 cursor-pointer space-x-2 bg-transparent hover:bg-gray-100 font-bold",children:[Object(v.jsx)("input",{type:"radio",id:n.key,value:n.value,name:t,checked:c&&n.key===c.key,onChange:function(){a(n)}}),Object(v.jsx)("span",{children:n.text})]})};return Object(v.jsx)("div",{className:"flex flex-col space-y-4 mt-6",children:!!(null===n||void 0===n?void 0:n.length)&&(null===n||void 0===n?void 0:n.map((function(e){return Object(v.jsx)(i,{item:e},e.key)})))})}function Re(){var e,t,n=Object(c.useState)(O.HandSize),a=Object(l.a)(n,2),i=a[0],r=a[1],s=Object(c.useContext)(J),o=s.crystalRing,d=s.isFillCrystal,j=s.dispatch,h=ve("handSize").list,f=ve("sliverPipe").list,x=b().getSession,p=ve("crystalProducts/".concat(null!==(e=null===(t=x(y))||void 0===t?void 0:t.phone)&&void 0!==e?e:"")).post,N=Object(g.g)();Object(c.useEffect)((function(){h&&h.length&&function(e){return function(t){e({type:D,data:{handSize:t}})}}(j)(h[0])}),[h]);return Object(v.jsxs)("div",{className:"flex flex-col w-full h-full divide-y-2 divide-black space-y-4 py-16 mx-10 z-10",children:[Object(v.jsx)("h4",{className:"text-left text-3xl font-bold",children:"Crystal Life"}),Object(v.jsxs)("div",{className:"flex-1 max-h-full overflow-hidden",children:[i===O.HandSize&&Object(v.jsxs)("div",{className:"w-full h-full flex flex-col p-2",children:[Object(v.jsx)("label",{className:"text-left text-lg",children:"\u624b\u570d"}),Object(v.jsx)("small",{className:"text-left text-xs",children:"\u9078\u64c7\u9069\u5408\u4f60\u7684\u624b\u570d\u9577\u5ea6"}),Object(v.jsx)("div",{className:"flex-1 h-full overflow-auto",children:Object(v.jsx)(Ee,{list:h,defaultValue:o.handSize,groupName:"handSize",updateRadio:Z(j,f[0])})})]}),i===O.SliverPipe&&Object(v.jsxs)("div",{className:"w-full h-full flex flex-col p-2",children:[Object(v.jsx)("label",{className:"text-left text-lg",children:"\u9280\u7ba1"}),Object(v.jsx)("small",{className:"text-left text-xs",children:"\u9078\u64c7\u9069\u5408\u4f60\u7684\u9280\u570d\u9577\u5ea6"}),Object(v.jsx)("div",{className:"flex-1 h-full overflow-auto",children:Object(v.jsx)(Ee,{list:f&&f.filter((function(e){return e.value===o.handSize.value})),defaultValue:o.sliverPipe,groupName:"sliverPipe",updateRadio:G(j)})})]}),i===O.Crystal&&Object(v.jsxs)("div",{className:"w-full h-full flex flex-col p-2",children:[Object(v.jsx)("label",{className:"text-left text-lg",children:"\u6c34\u6676"}),Object(v.jsx)("small",{className:"text-left text-xs",children:"\u5728\u5de6\u908a\u7522\u54c1\u4e2d\u9078\u53d6\u5713\u73e0\uff0c\u5728\u53f3\u908a\u9078\u64c7\u60f3\u8981\u7684\u6c34\u6676"}),Object(v.jsx)("div",{className:"mt-6 flex-1 h-full overflow-auto",children:Object(v.jsx)(Se,{layout:"grid",tableName:"codeList/crystalImages",updateSelect:Y(j)})})]}),i===O.FlowerCover&&Object(v.jsxs)("div",{className:"w-full h-full flex flex-col p-2",children:[Object(v.jsx)("label",{className:"text-left text-lg",children:"\u82b1\u84cb"}),Object(v.jsx)("small",{className:"text-left text-xs",children:"\u5728\u5de6\u908a\u7522\u54c1\u4e2d\u9078\u53d6\u5713\u73e0\uff0c\u5728\u53f3\u908a\u9078\u64c7\u60f3\u8981\u7684\u82b1\u84cb\uff0c\u6309\u4e0b\u52a0\u5728\u5de6\u908a\u6216\u53f3\u908a"}),Object(v.jsx)("div",{className:"mt-6 flex-1 h-full overflow-auto",children:Object(v.jsx)(Le,{removeFlower:$(j),updateLeft:X(U,j),updateRight:X(_,j)})})]}),i===O.Charm&&Object(v.jsxs)("div",{className:"h-full w-full flex flex-col p-2",children:[Object(v.jsx)("label",{className:"text-left text-lg",children:"\u540a\u98fe"}),Object(v.jsx)("small",{className:"text-left text-xs",children:"\u5728\u5de6\u908a\u7522\u54c1\u4e2d\u9078\u53d6\u5713\u73e0\uff0c\u6309\u4e0b\u52a0\u540a\u98fe\uff0c\u6703\u5728\u8a72\u5713\u73e0\u5de6\u908a\u52a0\u5165"}),Object(v.jsx)("div",{className:"mt-6 flex-1 h-full overflow-auto",children:Object(v.jsx)(ke,{addCharm:Q(j),removeCharm:ee(j)})})]})]}),Object(v.jsxs)("div",{className:"flex justify-evenly pt-2",children:[Object(v.jsx)("button",{onClick:function(){r((function(e){return e-1}))},disabled:0==i,children:"\u4e0a\u4e00\u6b65"}),i!==O.Charm&&Object(v.jsx)("button",{onClick:function(){r((function(e){return e+1}))},disabled:i==O.Charm||i==O.Crystal&&!d,children:"\u4e0b\u4e00\u6b65"}),i==O.Charm&&Object(v.jsx)("button",{onClick:function(){return o.setCreatedTime(u.a.database.ServerValue.TIMESTAMP),void p(o).then((function(){return N.push(m.CompletePage)}))},children:"\u63d0\u4ea4"})]})]})}var Ae,Pe,Fe,De=ce.b.div(Oe||(Oe=Object(p.a)(["\n  position: absolute;\n  top: ",";\n  left: ",";\n  display: flex;\n  width: ",";\n  height: ",";\n  border-radius: 50%;\n  cursor: pointer;\n  align-items: center;\n  transform: rotate(",");\n\n  ","\n\n  ","\n\n  &: hover {\n    background-color: #f7f0c0;\n  }\n"])),(function(e){return"".concat(e.top,"px")}),(function(e){return"".concat(e.left,"px")}),(function(e){return"".concat(e.radius,"px")}),(function(e){return"".concat(e.radius,"px")}),(function(e){return"".concat(e.angular,"deg")}),(function(e){return e.isEmpty&&Object(ce.a)(me||(me=Object(p.a)(["\n      background-color: #fffbe0;\n      border: 1px dashed rgb(234 146 82 / 80%);\n    "])))}),(function(e){return e.isClicked&&Object(ce.a)(pe||(pe=Object(p.a)(["\n      border: 2px dashed #ea7e30;\n    "])))})),Te=ce.b.img.attrs((function(e){var t;return{isLeft:null===(t=e.isLeft)||void 0===t||t}}))(ge||(ge=Object(p.a)(["\n  position: absolute;\n  ",";\n  width: 100%;\n  height: 100%;\n  content: '';\n  ",";\n"])),(function(e){return e.isLeft?"left: -25%":"right: -25%"}),(function(e){return e.isLeft&&"transform: rotate(180deg)"})),Ie=ce.b.div(ye||(ye=Object(p.a)(["\n  height: 100px;\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  left: -50%;\n  top: 100%;\n  z-index: 10;\n  align-items: center;\n\n  i {\n    flex: 0 0 30px;\n  }\n\n  .charm-image {\n    padding: 4px;\n    border-radius: 20px;\n    margin-top: 2px;\n    width: 60px;\n    height: 60px;\n  }\n"])));function ze(e){var t,n,a,i=e.top,r=e.left,s=e.item,o=e.angular,u=e.beadSize,d=e.dispatch,j=Object(c.useState)(!1),b=Object(l.a)(j,2),h=b[0],f=b[1];Object(c.useEffect)((function(){f(!1)}),[s]);return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(De,{top:i,left:r,isEmpty:!(null===s||void 0===s?void 0:s.url),isClicked:h,radius:u,angular:o,onClick:function(){return function(e){f((function(t){var n=!t;return d&&d(n?{type:I,data:{selectedDisplayCrystal:e.key}}:{type:z,data:{selectedDisplayCrystal:e.key}}),n}))}(s)},children:[(null===s||void 0===s||null===(t=s.charm)||void 0===t?void 0:t.url)&&Object(v.jsxs)(Ie,{children:[Object(v.jsx)("i",{className:"icon-xl icon-up-arrow"}),Object(v.jsx)("div",{className:"charm-image",children:Object(v.jsx)("img",{src:s.charm.url})})]}),(null===s||void 0===s||null===(n=s.leftFlower)||void 0===n?void 0:n.url)&&Object(v.jsx)(Te,{src:null===s||void 0===s?void 0:s.leftFlower.url}),Object(v.jsx)("div",{children:(null===s||void 0===s?void 0:s.url)&&Object(v.jsx)("img",{src:null===s||void 0===s?void 0:s.url,className:"w-full h-full"})}),(null===s||void 0===s||null===(a=s.rightFlower)||void 0===a?void 0:a.url)&&Object(v.jsx)(Te,{src:null===s||void 0===s?void 0:s.rightFlower.url,isLeft:!1})]})})}var Ue,_e,Me=ce.b.div(Ae||(Ae=Object(p.a)(["\n  width: ",";\n  height: ",";\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: auto;\n  ",";\n"])),(function(e){return"".concat(2*e.radius+e.beadSize,"px")}),(function(e){return"".concat(2*e.radius+e.beadSize,"px")}),(function(e){return e.disabledEvent&&Object(ce.a)(Pe||(Pe=Object(p.a)(["\n      pointer-events: none;\n    "])))})),Be=ce.b.div(Fe||(Fe=Object(p.a)(["\n  width: ",";\n  height: ",";\n  border: 4px solid #d1d5db;\n  border-radius: 50%;\n"])),(function(e){return"calc(100% - ".concat(e.beadSize,"px)")}),(function(e){return"calc(100% - ".concat(e.beadSize,"px)")}));function He(e){var t=e.crystalRing,n=e.disabled,c=e.dispatch,a=t.beads,i=t.handSize;if(!i)return Object(v.jsx)(v.Fragment,{});var r=function(e,t){var n=t.radiusWidth,c=t.radiusWidth,a=360/t.crystalCount,i=a*Math.PI/180;return e.map((function(e,t){var r=Math.sin(i*t)*n+n;return{item:e,top:Math.cos(i*t)*c+c,left:r,angular:a}}))}(a,i);return Object(v.jsx)(Me,{radius:i.radiusWidth,beadSize:i.beadSize,disabledEvent:!!n,children:Object(v.jsx)(Be,{beadSize:i.beadSize,children:r.map((function(e,t){return Object(v.jsx)(ze,{top:e.top,left:e.left,item:e.item,dispatch:c,beadSize:i.beadSize,angular:e.angular*t*-1},e.item.key)}))})})}function Ve(){var e=Object(c.useContext)(J),t=e.crystalRing,n=e.dispatch;return Object(v.jsx)(He,{crystalRing:t,dispatch:n})}var We=ce.b.div(Ue||(Ue=Object(p.a)(["\n  display: flex;\n  height: 100%;\n"]))),qe=ce.b.div(_e||(_e=Object(p.a)(["\n  height: 100%;\n  border-left: 1px solid;\n  flex: 0 0 385px;\n  display: flex;\n"])));var Je,Ke,Ye,Ze=function(){var e=Object(c.useReducer)(K,q),t=Object(l.a)(e,2),n=t[0],a=t[1];return Object(v.jsx)(J.Provider,{value:{crystalRing:n.crystalRing,selectedDisplayCrystal:n.selectedDisplayCrystal,isFillCrystal:n.isFillCrystal,dispatch:a},children:Object(v.jsxs)(We,{className:"App",children:[Object(v.jsx)("div",{className:"flex flex-grow justify-center items-center",children:Object(v.jsx)(Ve,{})}),Object(v.jsxs)(qe,{className:"bg-gray-50 relative",children:[Object(v.jsx)("div",{className:"absolute w-full h-full novus-no-border-logo opacity-30 z-0"}),Object(v.jsx)(Re,{})]})]})})};function Ge(e){var t=e.navigation,n=e.currentUrl,c=h().adminLogout,a=Object(g.g)();return Object(v.jsxs)("nav",{className:"flex flex-col bg-blue-50 h-full border-r border-gray-300 p-5",style:{flex:"0 0 250px"},children:[Object(v.jsx)("div",{className:"flex-1 divide-y divide-indigo-300 ",children:t.map((function(e){return Object(v.jsxs)(r.b,{className:"flex justify-between py-4 hover:bg-blue-200",activeClassName:"bg-blue-100",to:"".concat(n).concat(e.path),children:[Object(v.jsx)("label",{className:"text-xl",children:e.text}),Object(v.jsx)("i",{className:"icon icon-right-arrow"})]},e.key)}))}),Object(v.jsx)("button",{onClick:function(){c(),a.push(m.EmployeeLogin)},children:"\u767b\u51fa"})]})}!function(e){e.Phone="phone",e.Name="name",e.CrystalCount="crystalCount",e.Account="account",e.NotAssign="notAssign"}(Je||(Je={})),function(e){e.Format="formatError",e.Required="requiredError",e.Integer="IntegerError",e.Auth="AuthError",e.Account="AccountError"}(Ke||(Ke={}));var Xe,$e,Qe,et=ce.b.div(Ye||(Ye=Object(p.a)(["\n  color: red;\n  font-size: 12px;\n"])));function tt(e){var t,n,c,a,i,r=e.errMsg,s=e.name;return Object(v.jsxs)(v.Fragment,{children:[(null===(t=r[s])||void 0===t?void 0:t[Ke.Format])&&Object(v.jsx)(et,{children:"\u683c\u5f0f\u932f\u8aa4"}),(null===(n=r[s])||void 0===n?void 0:n[Ke.Required])&&Object(v.jsx)(et,{children:"\u8acb\u586b\u5beb\u6b64\u9805\u76ee"}),(null===(c=r[s])||void 0===c?void 0:c[Ke.Integer])&&Object(v.jsx)(et,{children:"\u8acb\u8f38\u5165\u6b63\u6574\u6578"}),(null===(a=r[s])||void 0===a?void 0:a[Ke.Auth])&&Object(v.jsx)(et,{children:"\u7121\u6b0a\u9650\u700f\u89bd"}),(null===(i=r[s])||void 0===i?void 0:i[Ke.Account])&&Object(v.jsx)(et,{children:"\u5e33\u865f\u5bc6\u78bc\u932f\u8aa4"})]})}var nt,ct,at,it,rt,st,lt,ot,ut=ce.b.button(Xe||(Xe=Object(p.a)(["\n  border: 1px solid #417deb;\n  border-radius: 5px;\n  padding: 4px;\n  background: #417deb;\n  color: white;\n  font-size: 14px;\n"]))),dt=ce.b.button($e||($e=Object(p.a)(["\n  flex: 0 0 60px;\n  height: 60px;\n  background-image: url(/assets/icon/chevron.svg);\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 60px;\n  ","\n"])),(function(e){return e.isLeft&&Object(ce.a)(Qe||(Qe=Object(p.a)(["\n      transform: scaleX(-1);\n    "])))})),jt=ce.b.label(nt||(nt=Object(p.a)(["\n  .title {\n    font-size: 12px;\n    color: rgba(0, 0, 0, 0.54);\n    font-weight: bold;\n  }\n\n  width: 192px;\n  &: focus-within {\n    .title {\n      color: #3f51b5;\n    }\n\n    input: not([type= 'button' ]) {\n      border-bottom: 1px solid #3f51b5;\n    }\n  }\n\n  input[type='text'] {\n    width: 100%;\n    border-bottom: 1px solid rgba(0, 0, 0, 0.54);\n\n    &:focus-visible {\n      outline: none;\n    }\n  }\n"]))),bt=ce.b.form(ct||(ct=Object(p.a)(["\n  display: flex;\n  flex-direction: ",";\n  justify-content: space-around;\n  padding: 10px;\n  border: 1px solid ",";\n  margin: 12px;\n  box-shadow: 1px 1px 2px 0px #dadada, -1px -1px 2px 0px #dadada;\n\n  & > * {\n    margin-top: 4px;\n    margin-bottom: 4px;\n  }\n\n  input[type='button'] {\n    background: transparent;\n    cursor: pointer;\n  }\n\n  input: not([type= 'button' ], [type= 'radio' ]) {\n    width: 100%;\n    border-bottom: 1px solid rgba(0, 0, 0, 0.54);\n\n    &:focus-visible {\n      outline: none;\n    }\n  }\n"])),(function(e){return(null===e||void 0===e?void 0:e.direction)||"row"}),(function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.borderColor)&&void 0!==t?t:"#dadada"})),ht=ce.b.div(at||(at=Object(p.a)(["\n  display: table;\n  width: 100%;\n\n  .table-cell {\n    padding: 7px;\n    text-align: center;\n  }\n\n  .table-header-group {\n    .table-cell {\n      font-weight: bold;\n      background-color: #ebd494;\n      border-bottom: 3px double black;\n    }\n  }\n\n  .table-row-group {\n    .table-row:nth-child(even) {\n      background-color: #fff4db;\n    }\n  }\n"])));Ke.Format,Ke.Required,Ke.Integer,Ke.Auth,Ke.Account;it=Je.Phone,rt=Je.Name,st=Je.CrystalCount,lt=Je.Account,ot=Je.NotAssign;var ft=function e(){Object(o.a)(this,e),this[it]=void 0,this[rt]=void 0,this[st]=void 0,this[lt]=void 0,this[ot]=void 0};function vt(e){return{type:Ke.Required,fieldName:e.currentTarget.name,isError:e.currentTarget.validity.valueMissing}}function xt(e){return{type:Ke.Integer,fieldName:e.currentTarget.name,isError:e.currentTarget.validity.stepMismatch}}function Ot(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ft,t=function(e,t){var n,c=null!==(n=t.fieldName)&&void 0!==n?n:Je.NotAssign;return t.type?Object(N.a)(Object(N.a)({},e),{},{[c]:Object(N.a)(Object(N.a)({},e[c]),{},{[t.type]:t.isError})}):e};return Object(c.useReducer)(t,e)}var mt=n(76),pt=n(74),gt=n(73),yt=n(77),Nt=mt.a(pt.a,gt.a),Ct=yt.a(Nt);function wt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var i=Object(c.useState)(!1),r=Object(l.a)(i,2),s=r[0],o=r[1];return Object(c.useEffect)((function(){var t=!0;n.forEach((function(n){if(Ct(e[n])){var c=Object.assign({},e[n]);t=t&&Object.values(c).every((function(e){return!e}))}else t=!1})),o(t)}),[e]),{validate:s,setValidate:o}}function St(){var e=ve("handSize"),t=e.list,n=e.post,a=e.remove,i=Object(c.useState)(""),r=Object(l.a)(i,2),s=r[0],o=r[1],u=Object(c.useState)(8),d=Object(l.a)(u,2),j=d[0],b=d[1],h=Object(c.useState)(0),f=Object(l.a)(h,2),x=f[0],O=f[1],m=Ot(),p=Object(l.a)(m,2),g=p[0],y=p[1],N=wt(g,Je.Name,Je.CrystalCount).validate;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(bt,{className:"form-inline",children:[Object(v.jsxs)(jt,{children:[Object(v.jsx)("div",{className:"title",children:"\u540d\u7a31: "}),Object(v.jsx)("input",{type:"text",className:"px-1",name:Je.Name,value:s,onInput:function(e){y(vt(e)),o(e.currentTarget.value)},required:!0}),Object(v.jsx)(tt,{errMsg:g,name:Je.Name})]}),Object(v.jsxs)(jt,{children:[Object(v.jsx)("div",{className:"title",children:"\u5927\u5c0f: "}),Object(v.jsxs)("div",{className:"flex justify-around",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{id:"8mm",type:"radio",value:8,name:"crystalSize",checked:8===j,onChange:function(e){return b(parseInt(e.currentTarget.value))}}),Object(v.jsx)("label",{htmlFor:"8mm",className:"cursor-pointer",children:"8nm"})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{id:"10mm",type:"radio",value:10,name:"crystalSize",checked:10===j,onChange:function(e){return b(parseInt(e.currentTarget.value))}}),Object(v.jsx)("label",{htmlFor:"10mm",className:"cursor-pointer",children:"10nm"})]})]})]}),Object(v.jsxs)(jt,{children:[Object(v.jsx)("div",{className:"title",children:"\u6578\u91cf: "}),Object(v.jsx)("input",{type:"number",className:"px-1",name:Je.CrystalCount,step:"1",required:!0,value:x,onInput:function(e){y(xt(e)),y(vt(e)),O(Number(e.currentTarget.value))}}),Object(v.jsx)(tt,{errMsg:g,name:Je.CrystalCount})]}),Object(v.jsx)("input",{type:"button",value:"\u65b0\u589e",onClick:function(){n(new L(s,j,x)).then((function(){o(""),b(8),O(0)}))},disabled:!N})]}),Object(v.jsxs)(ht,{className:"table",children:[Object(v.jsxs)("div",{className:"table-header-group",children:[Object(v.jsx)("div",{className:"table-cell",children:"\u7de8\u865f"}),Object(v.jsx)("div",{className:"table-cell",children:"\u540d\u7a31"}),Object(v.jsx)("div",{className:"table-cell",children:"\u5713\u73e0\u5927\u5c0f"}),Object(v.jsx)("div",{className:"table-cell",children:"\u5713\u73e0\u6578\u91cf"}),Object(v.jsx)("div",{className:"table-cell"})]}),Object(v.jsx)("div",{className:"table-row-group",children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(v.jsxs)("div",{className:"table-row",children:[Object(v.jsx)("div",{className:"table-cell",children:t+1}),Object(v.jsx)("div",{className:"table-cell",children:e.text}),Object(v.jsx)("div",{className:"table-cell",children:e.value}),Object(v.jsx)("div",{className:"table-cell",children:e.crystalCount}),Object(v.jsx)("div",{className:"table-cell",children:Object(v.jsx)(ut,{onClick:function(){return a(e.id)},children:"\u522a\u9664"})})]},e.id)}))})]})]})}function kt(){var e=ve("sliverPipe"),t=e.list,n=e.post,a=e.remove,i=Object(c.useState)(""),r=Object(l.a)(i,2),s=r[0],o=r[1],u=Object(c.useState)(8),d=Object(l.a)(u,2),j=d[0],b=d[1],h=Object(c.useState)(0),f=Object(l.a)(h,2),x=f[0],O=f[1],m=Ot(),p=Object(l.a)(m,2),g=p[0],y=p[1],N=wt(g,Je.Name,Je.CrystalCount).validate;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(bt,{children:[Object(v.jsxs)(jt,{children:[Object(v.jsx)("div",{className:"title",children:"\u540d\u7a31: "}),Object(v.jsx)("input",{type:"text",className:"px-1",name:Je.Name,value:s,onInput:function(e){y(vt(e)),o(e.currentTarget.value)},required:!0}),Object(v.jsx)(tt,{errMsg:g,name:Je.Name})]}),Object(v.jsxs)(jt,{children:[Object(v.jsx)("div",{className:"title",children:"\u5927\u5c0f: "}),Object(v.jsxs)("div",{className:"flex justify-around",children:[Object(v.jsxs)("label",{className:"cursor-pointer",children:[Object(v.jsx)("input",{type:"radio",value:8,name:"crystalSize",onChange:function(e){return b(parseInt(e.currentTarget.value))},checked:8===j}),"8nm"]}),Object(v.jsxs)("label",{className:"cursor-pointer",children:[Object(v.jsx)("input",{type:"radio",value:10,name:"crystalSize",onChange:function(e){return b(parseInt(e.currentTarget.value))},checked:10===j}),"10nm"]})]})]}),Object(v.jsxs)(jt,{children:[Object(v.jsx)("div",{className:"title",children:"\u6578\u91cf: "}),Object(v.jsx)("input",{type:"number",className:"px-1",step:"1",name:Je.CrystalCount,value:x,required:!0,onInput:function(e){y(xt(e)),y(vt(e)),O(parseInt(e.currentTarget.value))}}),Object(v.jsx)(tt,{errMsg:g,name:Je.CrystalCount})]}),Object(v.jsx)("input",{type:"button",value:"\u65b0\u589e",onClick:function(){n(new E(s,j,x)).then((function(){o(""),b(8),O(0)}))},disabled:!N})]}),Object(v.jsxs)(ht,{className:"table",children:[Object(v.jsxs)("div",{className:"table-header-group",children:[Object(v.jsx)("div",{className:"table-cell",children:"\u7de8\u865f"}),Object(v.jsx)("div",{className:"table-cell",children:"\u540d\u7a31"}),Object(v.jsx)("div",{className:"table-cell",children:"\u5713\u73e0\u5927\u5c0f"}),Object(v.jsx)("div",{className:"table-cell",children:"\u4f54\u5713\u73e0\u6578\u91cf"}),Object(v.jsx)("div",{className:"table-cell"})]}),Object(v.jsx)("div",{className:"table-row-group",children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(v.jsxs)("div",{className:"table-row",children:[Object(v.jsx)("div",{className:"table-cell",children:t+1}),Object(v.jsx)("div",{className:"table-cell",children:e.text}),Object(v.jsx)("div",{className:"table-cell",children:e.value}),Object(v.jsx)("div",{className:"table-cell",children:e.crystalCount}),Object(v.jsx)("div",{className:"table-cell",children:Object(v.jsx)(ut,{onClick:function(){return a(e.id)},children:"\u522a\u9664"})})]},e.key)}))})]})]})}var Lt,Et,Rt,At=[{key:"ALLOW_LIST",text:"\u6b0a\u9650\u5217\u8868",path:m.AllowList},{key:"PRODUCT_LIST",text:"\u7522\u54c1\u6e05\u55ae",path:m.CrystalProductList},{key:"HAND_SIZE",text:"\u624b\u570d",path:m.HandSizeForm},{key:"SLIVER_PIPE",text:"\u9280\u570d",path:m.SliverPipeForm},{key:"CRYSTAL",text:"\u6c34\u6676",path:m.CrystalBeadForm},{key:"FLOWER",text:"\u82b1\u84cb",path:m.FlowerCoverForm},{key:"CHARM",text:"\u540a\u98fe",path:m.CharmForm}],Pt=n(56),Ft=ce.b.div(Lt||(Lt=Object(p.a)(["\n  transition: width 1s ease-in-out;\n  width: 100px;\n  height: 100%;\n  border-radius: inherit;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  padding-right: 10px;\n\n  span {\n    font-weight: bold;\n    color: white;\n  }\n"]))),Dt=ce.b.div(Et||(Et=Object(p.a)(["\n  width: 100%;\n  height: 20px;\n  border: 1px solid;\n  border-radius: 20px;\n"])));function Tt(e){var t=e.percent;return Object(v.jsx)(Dt,{children:Object(v.jsx)(Ft,{className:"bg-blue-600",style:{width:"".concat(t,"%")},children:Object(v.jsx)("span",{children:"".concat(t,"%")})})})}var It=ce.b.div(Rt||(Rt=Object(p.a)(["\n  display: grid;\n  grid-template-columns: repeat(4, minmax(60px, 1fr));\n  grid-auto-rows: 60px;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n"])));var zt,Ut=function e(t){Object(o.a)(this,e),this.id=void 0,this.url=void 0,this.id=Object(S.a)(),this.url=null!==t&&void 0!==t?t:""};!function(e){e.Start="start",e.Running="running",e.Completed="completed",e.Pause="Pause"}(zt||(zt={}));var _t,Mt,Bt,Ht,Vt,Wt,qt=function e(t){var n,c,a,i;Object(o.a)(this,e),this.isStart=!0,this.isUploading=!1,this.isCompleted=!1,this.progress=0,this.list=[],this.completedList=[],this.failList=[],this.progress=null!==(n=null===t||void 0===t?void 0:t.progress)&&void 0!==n?n:0,this.list=null!==(c=null===t||void 0===t?void 0:t.list)&&void 0!==c?c:[],this.completedList=null!==(a=null===t||void 0===t?void 0:t.completedList)&&void 0!==a?a:[],this.failList=null!==(i=null===t||void 0===t?void 0:t.failList)&&void 0!==i?i:[]};function Jt(e){return new Array(e).fill("").map((function(){return Object(S.a)()}))}var Kt=ce.b.label(_t||(_t=Object(p.a)(["\n  border: 1px dashed #406fbb;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  cursor: pointer;\n  position: relative;\n\n  .icon {\n    width: 32px;\n    height: 32px;\n    margin: auto;\n  }\n\n  input {\n    display: none;\n  }\n"]))),Yt=ce.b.div(Mt||(Mt=Object(p.a)(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background-color: #a3c9eb52;\n  pointer-events: none;\n"]))),Zt=ce.b.div(Bt||(Bt=Object(p.a)(["\n  background: #cccccc;\n  margin: 3px;\n"]))),Gt=ce.b.div(Ht||(Ht=Object(p.a)(["\n  width: 100%;\n  height: 100%;\n  background: white;\n  position: absolute;\n  top: 0;\n  left: 0;\n  pointer-events: none;\n"]))),Xt=ce.b.div(Vt||(Vt=Object(p.a)(["\n  ","\n  margin: 3px;\n  cursor: pointer;\n"])),(function(e){return e.isSelected&&Object(ce.a)(Wt||(Wt=Object(p.a)(["\n      border: 1px solid;\n    "])))}));function $t(e){var t,n=e.tableName,a=Object(c.useRef)(null),i=Object(c.useState)(300),r=Object(l.a)(i,1)[0],s=Object(c.useState)(400),o=Object(l.a)(s,1)[0],d=Object(c.useState)(Jt(32)),b=Object(l.a)(d,2),h=b[0],f=b[1],x=Object(c.useState)([]),O=Object(l.a)(x,2),m=O[0],p=O[1],g=Object(c.useState)(),y=Object(l.a)(g,2),C=y[0],w=y[1],k=Object(c.useState)(null),L=Object(l.a)(k,2),E=L[0],R=L[1],A=ve("codeList/".concat(n)).post,P=function(e){var t=Object(c.useState)(!1),n=Object(l.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)(),s=Object(l.a)(r,2),o=s[0],u=s[1],d=Object(c.useCallback)((function(e){e.preventDefault(),i(!0)}),[]),j=Object(c.useCallback)((function(e){e.preventDefault(),i(!1)}),[]),b=Object(c.useCallback)((function(e){e.preventDefault(),i(!0)}),[]),h=Object(c.useCallback)((function(e){var t,n;e.preventDefault(),e.stopPropagation(),(null===(t=e.dataTransfer)||void 0===t?void 0:t.files)&&u(null===(n=e.dataTransfer)||void 0===n?void 0:n.files),i(!1)}),[]);return Object(c.useEffect)((function(){return e&&(e.addEventListener("drop",h),e.addEventListener("dragenter",d),e.addEventListener("dragleave",j),e.addEventListener("dragover",b)),function(){e&&(e.removeEventListener("drop",h),e.removeEventListener("dragenter",d),e.removeEventListener("dragleave",j),e.removeEventListener("dragleave",b))}}),[e]),{files:o,isDragging:a}}(E),D=P.isDragging,T=P.files,I=function(e){return new Promise((function(t){var n=new FileReader;n.onload=function(e){var n;(null===(n=e.target)||void 0===n?void 0:n.result)&&t(new Ut(e.target.result))},n.readAsDataURL(e)}))},z=Object(c.useReducer)((function(e,t){var n,c,a;switch(t.type){case zt.Start:return Object(N.a)(Object(N.a)({},e),{},{isStart:!0,list:t.data.list,completedList:[]});case zt.Running:if(!(null===(n=e.list)||void 0===n?void 0:n.length))return e;var i=t.data,r=null!==(c=e.completedList)&&void 0!==c?c:[],s=null!==(a=i.completedList)&&void 0!==a?a:[],l=r.concat(s),o=l.length/e.list.length*100,u=Math.round(o),d=l.length===e.list.length?{isCompleted:!0,isUploading:!1}:{isUploading:!0,isCompleted:!1};return Object(N.a)(Object(N.a)(Object(N.a)({},e),d),{},{isStart:!1,progress:u,completedList:l});default:return e}}),new qt),U=Object(l.a)(z,2),_=U[0],M=U[1],B=function(e){if(e.length){var t;M((t=e,{type:zt.Start,data:{list:t}}));var c,a=Object(Pt.a)(e);try{var i=function(){var e=c.value,t=j.child("".concat(n,"/").concat(e.name)).put(e,{contentType:"image/jpeg"});t.on("state_changed",null,null,(function(){var e=t.snapshot.ref;e.getDownloadURL().then((function(t){var n;A(new F({name:e.name,url:t,createdAt:u.a.database.ServerValue.TIMESTAMP})),M((n=t,{type:zt.Running,data:{completedList:[n]}}))}))}))};for(a.s();!(c=a.n()).done;)i()}catch(r){a.e(r)}finally{a.f()}}},H=function(e){e&&e.length&&(Array.from(e).map((function(e){I(e).then((function(e){p((function(t){return t.concat(e)})),!C&&w(e)}))})),h.length>0&&f((function(t){return Jt(t.length-e.length)})))};return Object(c.useEffect)((function(){_.isCompleted&&(p([]),f(Jt(32)),w(null))}),[_]),Object(c.useEffect)((function(){(null===T||void 0===T?void 0:T.length)&&H(T)}),[T]),Object(v.jsxs)("div",{className:"flex",style:{height:o},children:[Object(v.jsxs)(Kt,{className:"flex-1 relative",ref:R,children:[Object(v.jsxs)("div",{className:"m-auto pointer-events-none",children:[Object(v.jsx)("i",{className:"icon icon-upload-image"}),Object(v.jsx)("span",{children:"Upload Images"})]}),Object(v.jsx)("input",{type:"file",ref:a,multiple:!0,onChange:function(){var e,t;return H(null!==(e=null===a||void 0===a||null===(t=a.current)||void 0===t?void 0:t.files)&&void 0!==e?e:null)}}),C&&Object(v.jsx)(Gt,{children:Object(v.jsx)("img",{src:C.url})}),D&&Object(v.jsx)(Yt,{})]}),Object(v.jsxs)("div",{className:"flex justify-center flex-col border",children:[Object(v.jsxs)(It,{style:{width:r},children:[m.map((function(e,t){return Object(v.jsxs)(Xt,{className:"relative",isSelected:e.id===(null===C||void 0===C?void 0:C.id),onClick:function(){return w(e)},children:[Object(v.jsx)("img",{src:e.url}),Object(v.jsx)("i",{className:"icon icon-x-mark absolute",style:{top:0,right:0},onClick:function(){return function(e){p((function(t){var n=t.filter((function(t){return t.id!==e.id}));return e.id===(null===C||void 0===C?void 0:C.id)&&w(null),n.length&&w(n[0]),n})),f((function(e){return e.concat(Object(S.a)())}))}(e)}})]},e.id)})),h.map((function(e){return Object(v.jsx)(Zt,{},e)}))]}),!_.isUploading&&Object(v.jsx)(ut,{type:"button",onClick:function(){var e,t,n=Array.from(null!==T&&void 0!==T?T:[]),c=Array.from(null!==(e=null===a||void 0===a||null===(t=a.current)||void 0===t?void 0:t.files)&&void 0!==e?e:[]);B(c.concat(n))},disabled:!m.length,children:"\u958b\u59cb\u4e0a\u50b3"}),_.isUploading&&Object(v.jsx)(Tt,{percent:null!==(t=_.progress)&&void 0!==t?t:0})]})]})}function Qt(e){var t=e.tableName,n=ve("codeList").remove;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)($t,{tableName:t}),Object(v.jsx)("hr",{}),Object(v.jsx)("div",{className:"text-2xl mb-2",children:"\u5df2\u6709\u7522\u54c1\u5716"}),Object(v.jsx)("div",{className:"max-h-full overflow-hidden",children:Object(v.jsx)(Se,{layout:"grid",openRemove:!0,tableName:"codeList/".concat(t),removeSelect:function(e){j.child("".concat(t,"/").concat(e.name)).delete(),n("".concat(t,"/").concat(e.id))}})})]})}var en=function e(t,n){Object(o.a)(this,e),this.id=void 0,this.key=void 0,this.name=void 0,this.phone=void 0,this.activate=void 0,this.key=t,this.phone=t,this.name=n,this.activate=!1};function tn(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(""),r=Object(l.a)(i,2),s=r[0],o=r[1],u=ve("allowList"),d=u.list,j=u.post,b=u.remove,h=u.patch,f=Ot(),x=Object(l.a)(f,2),O=x[0],m=x[1],p=wt(O,Je.Phone,Je.Name).validate,g=function(e,t){return h(e,{activate:t})};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(bt,{children:[Object(v.jsxs)(jt,{children:[Object(v.jsx)("div",{className:"title",children:"\u624b\u6a5f: "}),Object(v.jsx)("input",{type:"text",className:"px-1",pattern:"^0{1}9{1}\\d{8}$",value:n,name:Je.Phone,required:!0,onInput:function(e){m(function(e){return{type:Ke.Format,fieldName:e.currentTarget.name,isError:e.currentTarget.validity.patternMismatch}}(e)),a(e.currentTarget.value)}}),Object(v.jsx)(tt,{errMsg:O,name:Je.Phone})]}),Object(v.jsxs)(jt,{children:[Object(v.jsx)("div",{className:"title",children:"\u9867\u5ba2\u59d3\u540d: "}),Object(v.jsx)("input",{type:"text",className:"px-1",value:s,name:Je.Name,onInput:function(e){m(vt(e)),o(e.currentTarget.value)},required:!0}),Object(v.jsx)(tt,{errMsg:O,name:Je.Name})]}),Object(v.jsx)("input",{type:"button",value:"\u65b0\u589e",onClick:function(){j(new en(n,s),n).then((function(e){return!e&&a("")}))},disabled:!p})]}),Object(v.jsxs)(ht,{className:"table",children:[Object(v.jsxs)("div",{className:"table-header-group",children:[Object(v.jsx)("div",{className:"table-cell",children:"\u7de8\u865f"}),Object(v.jsx)("div",{className:"table-cell",children:"\u624b\u6a5f\u865f\u78bc"}),Object(v.jsx)("div",{className:"table-cell",children:"\u9867\u5ba2\u59d3\u540d"}),Object(v.jsx)("div",{className:"table-cell",children:"\u6d3b\u52d5\u72c0\u614b"}),Object(v.jsx)("div",{className:"table-cell"})]}),Object(v.jsx)("div",{className:"table-row-group",children:d&&(null===d||void 0===d?void 0:d.map((function(e,t){return Object(v.jsxs)("li",{className:"table-row",children:[Object(v.jsx)("div",{className:"table-cell",children:t+1}),Object(v.jsx)("div",{className:"table-cell",children:e.phone}),Object(v.jsx)("div",{className:"table-cell",children:e.name}),Object(v.jsxs)("div",{className:"table-cell",children:[Object(v.jsxs)("label",{children:[Object(v.jsx)("input",{id:"activate",type:"radio",name:"activated".concat(t),checked:!!e.activate,onChange:function(){return g(e.key,!0)}},"".concat(e.id,"activated")),"\u555f\u7528"]}),Object(v.jsxs)("label",{children:[Object(v.jsx)("input",{id:"deactivate",type:"radio",name:"activated".concat(t),checked:!e.activate,onChange:function(){return g(e.key,!1)}},"".concat(e.id,"deactivated")),"\u505c\u7528"]})]}),Object(v.jsx)("div",{className:"space-x-2 table-cell",children:Object(v.jsx)(ut,{onClick:function(){return t=e.id,b(t);var t},children:"\u522a\u9664"})})]},e.id)})))})]})]})}var nn,cn={path:"createdAt",by:se.Desc};function an(){var e,t,n=ve("allowList").list,a=ve("crystalProducts",!1,cn),i=a.list,r=a.getList,s=Object(c.useState)([]),o=Object(l.a)(s,2),u=(o[0],o[1],Object(c.useState)()),d=Object(l.a)(u,2),j=d[0],b=d[1],h=Object(c.useState)(0),f=Object(l.a)(h,2),x=f[0],O=f[1];Object(c.useEffect)((function(){(null===j||void 0===j?void 0:j.id)&&r(j.id)}),[j]);var m,p=function(e){return O((function(t){return t+e}))};return Object(v.jsxs)("div",{className:"flex flex-col p-11 justify-center items-center",children:[Object(v.jsxs)(jt,{htmlFor:"chooseUser",children:[Object(v.jsx)("div",{className:"title",children:"\u9078\u64c7\u4f7f\u7528\u8005\u96fb\u8a71:"}),Object(v.jsx)("input",{list:"allowList",type:"text",name:"chooseUser",id:"chooseUser",value:null===j||void 0===j?void 0:j.id,onChange:function(e){return function(e){var t=n.find((function(t){return t.id===e}));b(t)}(e.currentTarget.value)}}),Object(v.jsx)("datalist",{id:"allowList",children:n.map((function(e){return Object(v.jsx)("option",{value:e.phone},e.id)}))})]}),Object(v.jsxs)("div",{className:"m-16 flex justify-center items-center",style:{width:800,height:500},children:[!!i.length&&Object(v.jsxs)("div",{className:"flex w-full items-center justify-center relative",children:[Object(v.jsxs)("div",{className:"absolute flex flex-col items-center",children:[Object(v.jsx)("span",{children:null!==(e=null===j||void 0===j?void 0:j.name)&&void 0!==e?e:"\u9867\u5ba2"}),Object(v.jsx)("span",{children:(m=null===(t=i[x])||void 0===t?void 0:t.createdAt,m?new Date(m).toLocaleString():"\u7121\u6642\u9593\u8cc7\u6599")})]}),Object(v.jsx)(dt,{isLeft:!0,onClick:function(){return p(-1)},disabled:i.length<=1||0===x}),Object(v.jsx)("div",{className:"flex-1 flex items-center",children:Object(v.jsx)(He,{crystalRing:i[x],disabled:!0})}),Object(v.jsx)(dt,{disabled:i.length<=1||x>=i.length-1,onClick:function(){return p(1)}})]}),!i.length&&Object(v.jsxs)("div",{className:"w-full h-full flex rounded flex-col justify-center items-center border-4 border-dashed",children:[Object(v.jsx)("i",{className:"icon-5xl icon-empty-box"}),"\u67e5\u7121\u8cc7\u6599"]})]})]})}function rn(){var e=Object(g.h)().url;return Object(v.jsxs)("div",{className:"h-full flex",children:[Object(v.jsx)(Ge,{navigation:At,currentUrl:e}),Object(v.jsx)("div",{className:"flex flex-col w-full h-full",children:Object(v.jsxs)(g.d,{children:[Object(v.jsx)(g.b,{path:"".concat(e).concat(m.AllowList),children:Object(v.jsx)(tn,{})}),Object(v.jsx)(g.b,{path:"".concat(e).concat(m.CrystalProductList),children:Object(v.jsx)(an,{})}),Object(v.jsx)(g.b,{path:"".concat(e).concat(m.HandSizeForm),children:Object(v.jsx)(St,{})}),Object(v.jsx)(g.b,{path:"".concat(e).concat(m.SliverPipeForm),children:Object(v.jsx)(kt,{})}),Object(v.jsx)(g.b,{path:"".concat(e).concat(m.CrystalBeadForm),children:Object(v.jsx)(Qt,{tableName:"crystalImages"},"crystalImages")}),Object(v.jsx)(g.b,{path:"".concat(e).concat(m.FlowerCoverForm),children:Object(v.jsx)(Qt,{tableName:"flowerCovers"},"flowerCovers")}),Object(v.jsx)(g.b,{path:"".concat(e).concat(m.CharmForm),children:Object(v.jsx)(Qt,{tableName:"charms"},"charms")}),Object(v.jsx)(g.b,{exact:!0,path:"".concat(e),children:Object(v.jsx)(g.a,{to:"".concat(e).concat(m.AllowList)})})]})})]})}function sn(){var e=Object(g.g)(),t=h().userLogin,n=Object(c.useState)(""),a=Object(l.a)(n,2),i=a[0],r=a[1],s=b().setSession,o={enter:function(e){return function(t){"Enter"!==t.key&&"Enter"!==t.code||(t.stopPropagation(),t.preventDefault(),e())}}}.enter,u=Ot(),d=Object(l.a)(u,2),j=d[0],f=d[1],x=wt(j,Je.Account),O=x.validate,p=x.setValidate,N=function(){Nt(i)||t(i).then((function(t){var n,c=t.val(),a=!t.exists()||!c.activate;f((n=a,{type:Ke.Auth,fieldName:Je.Account,isError:n})),a||(s(y,c),e.push(m.CrystalShowroom))}))};return Object(v.jsx)("div",{className:"w-full h-full flex justify-center items-center flex-col novus-logo",children:Object(v.jsxs)(bt,{direction:"column",className:"opacity-95 bg-white",borderColor:"black",children:[Object(v.jsxs)(jt,{children:[Object(v.jsx)("div",{className:"title",children:"\u8f38\u5165\u60a8\u7684\u624b\u6a5f\u865f\u78bc:"}),Object(v.jsx)("input",{onInput:function(e){p(!0),r(e.currentTarget.value)},onKeyPress:o(N)})]}),!O&&Object(v.jsx)(tt,{errMsg:j,name:Je.Account}),Object(v.jsx)("input",{type:"button",onClick:N,value:"\u767b\u5165"})]})})}var ln=ce.b.div(nn||(nn=Object(p.a)(["\n  width: 50%;\n  height: 100%;\n  background-color: #d7eaf1;\n  flex: 1;\n"])));function on(){var e=Object(g.g)(),t=Object(c.useState)(""),n=Object(l.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)(""),s=Object(l.a)(r,2),o=s[0],u=s[1],d=h().adminLogin,j={enter:function(e){return function(t){"Enter"!==t.key&&"Enter"!==t.code||(t.stopPropagation(),t.preventDefault(),e())}}}.enter,b=h().isAdmin,f=Ot(),x=Object(l.a)(f,2),O=x[0],p=x[1],y=wt(O,Je.Account),N=y.validate,C=y.setValidate,w=function(){d(a,o).then((function(t){e.push(m.CrystalDashboard)})).catch((function(e){var t;p((t=!0,{type:Ke.Account,fieldName:Je.Account,isError:t})),C(!1)}))};return Object(v.jsx)(v.Fragment,{children:b?Object(v.jsx)(g.a,{to:{pathname:m.CrystalDashboard}}):Object(v.jsxs)("div",{className:"w-full h-full flex justify-center items-center",children:[Object(v.jsx)(ln,{className:"rect-novus-logo"}),Object(v.jsx)("div",{className:"flex flex-1 flex justify-center items-center",children:Object(v.jsxs)(bt,{direction:"column",className:"items-center",style:{width:"260px"},children:[Object(v.jsxs)(jt,{className:"field ",children:[Object(v.jsx)("div",{className:"title",children:"\u5e33\u865f"}),Object(v.jsx)("input",{onInput:function(e){C(!0),i(e.currentTarget.value)},onKeyPress:j(w)})]}),Object(v.jsxs)(jt,{className:"field",children:[Object(v.jsx)("div",{className:"title",children:"\u5bc6\u78bc"}),Object(v.jsx)("input",{type:"password",onInput:function(e){C(!0),u(e.currentTarget.value)},onKeyPress:j(w)})]}),Object(v.jsx)("input",{type:"button",onClick:w,value:"\u767b\u5165"}),!N&&Object(v.jsx)(tt,{errMsg:O,name:Je.Account})]})})]})})}function un(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],i=h().userLogout;return Object(c.useEffect)((function(){setTimeout((function(){a(!0),i()}),3e3)}),[]),Object(v.jsxs)("div",{className:"w-full h-full flex flex-col justify-center items-center",children:[Object(v.jsx)("label",{className:"text-2xl",children:"\u5b8c\u6210\u586b\u5beb"}),Object(v.jsx)("label",{className:"text-sm mb-4",children:"\u6b63\u5728\u5c07\u4f60\u5c0e\u56de\u5230\u767b\u5165\u9801\u9762"}),Object(v.jsx)(re,{}),n&&Object(v.jsx)(g.a,{to:m.UserLogin})]})}var dn=n(47),jn=function(e){var t=e.children,n=Object(dn.a)(e,["children"]),c=h().isUser;return Object(v.jsx)(g.b,Object(N.a)(Object(N.a)({},n),{},{render:function(e){var n=e.location;return c?t:Object(v.jsx)(g.a,{to:{pathname:m.UserLogin,state:{from:n}}})}}))};function bn(e){var t=e.children,n=Object(dn.a)(e,["children"]),c=h().isAdmin;return Object(v.jsx)(g.b,Object(N.a)(Object(N.a)({},n),{},{render:function(e){var n=e.location;return c?t:Object(v.jsx)(g.a,{to:{pathname:m.EmployeeLogin,state:{from:n}}})}}))}function hn(){return Object(v.jsxs)("div",{className:"w-full h-full flex flex-col justify-center items-center",children:[Object(v.jsx)("i",{className:"icon-5xl icon-page-not-found"}),Object(v.jsx)("span",{className:"text-2xl font-bold",children:"Page Not Found"}),Object(v.jsx)("button",{className:"mt-3 border-b border-dotted border-black",onClick:function(){window.history.back()},children:"\u8fd4\u56de"})]})}function fn(){return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(g.d,{children:[Object(v.jsx)(g.b,{path:m.UserLogin,children:Object(v.jsx)(sn,{})}),Object(v.jsx)(jn,{path:m.CrystalShowroom,children:Object(v.jsx)(Ze,{})}),Object(v.jsx)(bn,{path:m.CrystalDashboard,children:Object(v.jsx)(rn,{})}),Object(v.jsx)(g.b,{path:m.EmployeeLogin,children:Object(v.jsx)(on,{})}),Object(v.jsx)(g.b,{path:m.CompletePage,children:Object(v.jsx)(un,{})}),Object(v.jsx)(g.b,{exact:!0,path:"/",children:Object(v.jsx)(g.a,{to:m.UserLogin})}),Object(v.jsx)(g.b,{path:"*",children:Object(v.jsx)(hn,{})})]})})}var vn=document.getElementById("root");Object(i.render)(Object(v.jsx)(r.a,{children:Object(v.jsx)(x,{children:Object(v.jsx)(fn,{})})}),vn)}},[[71,1,2]]]);
//# sourceMappingURL=main.90872189.chunk.js.map